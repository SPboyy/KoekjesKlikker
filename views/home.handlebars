 <link rel="stylesheet" href="/stylesheets/home/home.css">
  <link rel="stylesheet" href="/stylesheets/home/Right.css">
   <link rel="stylesheet" href="/stylesheets/home/Left.css">
    <link rel="stylesheet" href="/stylesheets/home/Center.css">
<div class="container">
    <div class="column left"> 
        <h1>Cookies (cps: <span id="cpsDisplay">{{cps}}</span>)</h1>
        <h1 id="cookieCount">{{koekies}}</h1>
        <button class="cookie-button" id="cookieBtn">
            <img src="images/cookie.png" alt="Cookie Button" class="cookie-img">
        </button>
          <div class="containerUpgrades1">

    <div class="columnhalf"> 
    <th>
      <h2>Cookies per click {getal}</h2>      
    </th>
   </div>
    <div class="columndouble">
      <button class="Buildings-button" id="cookieBtn">
        <img src="images/finger.png" alt="Cookie Button" height="150%" width="100%">
      </button>
    </div>
 </div>
    </div>
    <div class="column center">
      <div class="row">
            <button id="button-TopLeft">Options</button>
            <button id="button-TopRight" onclick="openPopup()">Prestige</button>
      </div>
      <div class="row">
            <button id="button-TopLeft">Stats</button>
      </div>
    <div class="podium">
  <div class="podium-block second">
    <div class="podium-rank">2</div>
    <div class="podium-name">Player2</div>
  </div>
  <div class="podium-block first">
    <div class="podium-rank">1</div>
    <div class="podium-name">Player1</div>
  </div>
  <div class="podium-block third">
    <div class="podium-rank">3</div>
    <div class="podium-name">Player3</div>
  </div>
</div>
<div class="containerLeaderboard">
<table>
  <tr>
    <th>ranking</th>
    <th>name</th>
    <th>Total Cookies</th>
  </tr>
  <tr>
    <td>1</td>
    <td>Player1</td>
    <td>0</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Player2</td>
    <td>0</td>
  </tr>
</table>


</div>


    </div>

    <div id="popup" class="popup-overlay" style="display: none;">
      <div class="popup-content">
        <h2>Prestige</h2>
        <span class="close-button" onclick="closePopup()">Ã—</span>
        <p>Prestige level {Koekjes}</p>
        <p>Heavenly chips {Koekjes}</p>
        <p>Ascending will reset the game for a permanent boost based on total amount of cookies you made.</p>
        <button onclick="confirmPrestige()">Bevestigen</button>
      </div>
    </div>
    <div class="column right">
        <div class="containerUpgrades1">
            <div class="columnhalf"> 
                <th>
                    <h2>Multiplier price: {{multiplierPrice}}</h2>
                    <button class="upgrade-button" id="upgradeBtn1">
                        <img src="images/LightBrownRollingPin.png" alt="Multiplier Upgrade" class="upgrade-img">
                    </button>
                </th>
                <th>
                    <h2>Discount price: {{discountPrice}}</h2>
                    <button class="upgrade-button" id="upgradeBtn2">
                        <img src="images/BrownRollingPin.png" alt="Discount Upgrade" class="upgrade-img">
                    </button>
                </th>
            </div>
            <div class="columndouble">
                <h3>Rolling pin price: {{buildings.[0].price}}</h3>
                <button class="Buildings-button" id="buildingBtn1" onclick="buyBuilding(0)">
                    <span class="building-count">{{buildings.[0].amount}}</span>
                    <img src="images/RollingPinOnTable.jpg" alt="Rolling Pin" class="building-img">
                </button>
            </div>
        </div>

        <div class="containerUpgrades2">
            <div class="columnhalf"> 
                <th>
                    <h2>Multiplier price: {{multiplierPrice}}</h2>
                    <button class="upgrade-button" id="upgradeBtn3">
                        <img src="images/CookieMonster.png" alt="Multiplier Upgrade" class="upgrade-img">
                    </button>
                </th>
                <th>
                    <h2>Discount price: {{discountPrice}}</h2>
                    <button class="upgrade-button" id="upgradeBtn4">
                        <img src="images/RedCookieMonster.png" alt="Discount Upgrade" class="upgrade-img">
                    </button>
                </th>
            </div>
            <div class="columndoubleLong">
                <h3>Cookie Monster price: {{buildings.[1].price}}</h3>
                <button class="BigBuildings-button" id="buildingBtn2" onclick="buyBuilding(1)">
                    <span class="building-count">{{buildings.[1].amount}}</span>
                    <img src="images/CookieMonster.jpg" alt="Cookie Monster" class="big-building-img">
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('cookieBtn').addEventListener('click', () => {
        fetch('/add-cookie', {
            method: 'POST'
        })
        .then(res => res.json())
        .then(data => {
            document.querySelector('#cookieCount').innerText = data.total;
            document.querySelector('#cpsDisplay').innerText = data.cps;
        })
        .catch(err => {
            console.error("Error adding cookie:", err);
            alert("Failed to add cookie. Please try again.");
        });
    });

    function buyBuilding(index) {
        fetch(`/buy-building/${index}`, {
            method: 'POST'
        })
        .then(res => {
            if (!res.ok) throw new Error(res.statusText);
            return res.json();
        })
        .then(data => {
            if (data.error) {
                alert(data.error);
                return;
            }
            
            document.querySelectorAll('.building-count')[index].textContent = data.amount;
            document.querySelectorAll('.columndouble h3, .columndoubleLong h3')[index].innerHTML = 
                `${data.name} price: ${data.price.toFixed(1)}`;
            
            document.querySelector('#cookieCount').innerText = data.totalCookies;
            document.querySelector('#cpsDisplay').innerText = data.cps;
        })
    }

    function openPopup() {
        const popup = document.getElementById("popup");
        popup.style.display = "flex";
    }

    function closePopup() {
        const popup = document.getElementById("popup"); 
        popup.style.display = "none";
    }

  function confirmPrestige() {
    closePopup();

    window.location.href = "/prestige";
  }
    window.addEventListener("click", function(event) {
        const popup = document.getElementById("popup");
        if (event.target === popup) {
            closePopup();
        }
    });
</script>